# 2K 选秀年份模拟器

这是一个用于模拟 NBA 2K 游戏中“终极联盟”模式下，如何策略性地选择历史选秀名单的工具。它可以帮助用户在多个赛季中实现选秀年份的随机化选择，同时通过智能的冷却机制，确保了长周期内的多样性和趣味性。

## 核心功能

- **智能随机选秀**: 从一个可用的历史年份池中（默认为1980-2005年），根据预设的权重和规则随机选择一个选秀年份。
- **动态冷却机制**: 已被选中的年份会进入一个20年的冷却期，在此期间不能再次被选中，确保了选秀的多样性。
- **灵活的年份规则**:
    - 选秀年份本身必须至少比当前模拟的年份早20年。
    - 处于冷却期内的年份不可用。
- **状态持久化与可配置性**:
    - **起始年份**: 您可以通过根目录下的 `.env` 文件来配置模拟的起始年份。只需在该文件中设置 `SIMULATION_START_YEAR=XXXX` 即可。
    - **模拟进度**: 程序的当前模拟年份保存在 `current_year.json` 中。
    - **选秀池状态**: 所有选秀年份的权重和使用状态保存在 `draft_weights.json` 中，方便您随时查看和修改。
- **50年深度模拟测试**: 提供一个强大的脚本来运行一个50年的完整模拟，用于测试系统的长期行为、随机性分布，并生成详细的日志和汇总报告。
- **完善的日志与历史追溯**:
    - 所有的模拟测试都会以时间戳的形式被详细记录在 `logs/` 目录下。
    - `run_simulation.py` 提供了便捷的菜单来查看历史记录和比较两次不同测试的结果。

## 安装指南

1.  **克隆代码库**
    ```bash
    git clone <your-repository-url>
    cd <repository-name>
    ```

2.  **创建并激活虚拟环境**
    ```bash
    # For Windows
    python -m venv .venv
    .venv\Scripts\activate

    # For macOS/Linux
    python3 -m venv .venv
    source .venv/bin/activate
    ```

3.  **安装依赖**
    本项目使用 `python-dotenv` 来管理环境变量。
    ```bash
    pip install -r requirements.txt
    ```

4.  **配置起始年份 (可选)**
    在项目根目录创建一个名为 `.env` 的文件，并添加以下内容来指定模拟的起始年份：
    ```
    SIMULATION_START_YEAR=2026
    ```
    如果未设置，程序将默认从2026年开始。

## 如何使用

### 1. 运行主程序 (进行日常选秀)

如果您想进行单次选秀，请运行主程序：

```bash
python main.py
```

程序会显示一个交互式菜单，您可以选择：
- **1. 进行选秀**: 随机选择一个可用的选秀年份。
- **2. 重置所有年份**: 将所有选秀年份的状态重置为初始可用状态。
- **3. 查看可用年份**: 显示当前所有可用的及处于冷却期中的年份。
- **4. 重置当前年份**: 将模拟年份重置回您配置的起始年份（或默认的2026年）。
- **0. 退出程序**

### 2. 运行50年模拟测试

如果您想对系统的长期表现进行测试或生成趣味报告，可以运行模拟器：

```bash
python run_simulation.py
```

此脚本提供以下选项：
- **1. 运行新的50年模拟测试**: 执行一个完整的50年模拟，并将详细日志和汇总报告保存在 `logs/` 目录下。
- **2. 查看历史日志记录**: 显示所有已完成的模拟测试列表。
- **3. 比较两次测试结果**: 输入两个测试的时间戳，脚本会为您对比它们在年份使用和球队选择上的差异。
- **0. 退出**

### 3. 运行单元测试

项目包含一套单元测试来确保核心逻辑的正确性。

```bash
python -m unittest discover
```

## 项目结构概览

```
.
├── .env                # 环境变量配置文件 (用于设置起始年份)
├── .gitignore          # Git忽略文件列表
├── main.py             # 主程序入口 (交互式选秀)
├── run_simulation.py   # 50年模拟测试运行器
├── test_draft_system.py # 单元测试和模拟核心逻辑
├── requirements.txt    # 项目依赖
├── current_year.json   # (自动生成) 当前模拟年份
├── draft_weights.json  # (自动生成) 选秀池权重和状态
└── logs/               # (自动生成) 存放所有模拟日志和报告
```